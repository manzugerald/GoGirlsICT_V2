{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GERALD/Desktop/NEXT/gogirlsict/app/api/reports/upload/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { promises as fs } from \"fs\";\r\nimport path from \"path\";\r\n\r\nexport const POST = async (req: Request) => {\r\n  const formData = await req.formData();\r\n  const file = formData.get(\"file\") as File;\r\n\r\n  if (!file) {\r\n    return NextResponse.json({ error: \"No file provided\" }, { status: 400 });\r\n  }\r\n\r\n  // Only allow image (png, jpg, jpeg) or pdf\r\n  const allowedImageExts = [\".png\", \".jpg\", \".jpeg\"];\r\n  const allowedPdfExts = [\".pdf\"];\r\n  const ext = path.extname(file.name).toLowerCase();\r\n\r\n  let uploadDir = \"\";\r\n  if (allowedImageExts.includes(ext)) {\r\n    uploadDir = \"public/assets/images/reports\";\r\n  } else if (allowedPdfExts.includes(ext)) {\r\n    uploadDir = \"public/assets/pdfs/report\";\r\n  } else {\r\n    return NextResponse.json({ error: \"Invalid file type\" }, { status: 400 });\r\n  }\r\n\r\n  // Ensure the upload directory exists\r\n  const uploadPath = path.join(process.cwd(), uploadDir);\r\n  await fs.mkdir(uploadPath, { recursive: true });\r\n\r\n  // Save the file\r\n  const filename = `${Date.now()}_${file.name.replace(/\\s+/g, \"_\")}`;\r\n  const filePath = path.join(uploadPath, filename);\r\n  const buffer = Buffer.from(await file.arrayBuffer());\r\n  await fs.writeFile(filePath, buffer);\r\n\r\n  // Public URL (without \"public\")\r\n  const publicUrl =\r\n    \"/\" + path.posix.join(uploadDir.replace(/^public\\//, \"\"), filename);\r\n\r\n  return NextResponse.json({ path: publicUrl });\r\n};"],"names":[],"mappings":";;;AAAA;AACA;AACA;;;;AAEO,MAAM,OAAO,OAAO;IACzB,MAAM,WAAW,MAAM,IAAI,QAAQ;IACnC,MAAM,OAAO,SAAS,GAAG,CAAC;IAE1B,IAAI,CAAC,MAAM;QACT,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAmB,GAAG;YAAE,QAAQ;QAAI;IACxE;IAEA,2CAA2C;IAC3C,MAAM,mBAAmB;QAAC;QAAQ;QAAQ;KAAQ;IAClD,MAAM,iBAAiB;QAAC;KAAO;IAC/B,MAAM,MAAM,iGAAA,CAAA,UAAI,CAAC,OAAO,CAAC,KAAK,IAAI,EAAE,WAAW;IAE/C,IAAI,YAAY;IAChB,IAAI,iBAAiB,QAAQ,CAAC,MAAM;QAClC,YAAY;IACd,OAAO,IAAI,eAAe,QAAQ,CAAC,MAAM;QACvC,YAAY;IACd,OAAO;QACL,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAoB,GAAG;YAAE,QAAQ;QAAI;IACzE;IAEA,qCAAqC;IACrC,MAAM,aAAa,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;IAC5C,MAAM,6FAAA,CAAA,WAAE,CAAC,KAAK,CAAC,YAAY;QAAE,WAAW;IAAK;IAE7C,gBAAgB;IAChB,MAAM,WAAW,GAAG,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,IAAI,CAAC,OAAO,CAAC,QAAQ,MAAM;IAClE,MAAM,WAAW,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,YAAY;IACvC,MAAM,SAAS,OAAO,IAAI,CAAC,MAAM,KAAK,WAAW;IACjD,MAAM,6FAAA,CAAA,WAAE,CAAC,SAAS,CAAC,UAAU;IAE7B,gCAAgC;IAChC,MAAM,YACJ,MAAM,iGAAA,CAAA,UAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,OAAO,CAAC,aAAa,KAAK;IAE5D,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,MAAM;IAAU;AAC7C","debugId":null}}]
}