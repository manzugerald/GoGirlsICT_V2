{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GERALD/Desktop/NEXT/gogirlsict/utils/useHybridCachedData.ts"],"sourcesContent":["import { useEffect, useState } from 'react';\r\n\r\ntype Fetcher<T> = () => Promise<T>;\r\ntype Options<T> = {\r\n  initialData?: T;\r\n  staleTime?: number; // ms\r\n};\r\n\r\nexport function useHybridCachedData<T>(\r\n  key: string,\r\n  fetcher: Fetcher<T>,\r\n  options: Options<T> = {}\r\n): { data: T | undefined; isLoading: boolean; refresh: () => void } {\r\n  // Default staleTime is 1 minutes\r\n  const { initialData, staleTime = 1 * 60 * 1000 } = options;\r\n  const [data, setData] = useState<T | undefined>(initialData);\r\n  const [isLoading, setIsLoading] = useState(!initialData);\r\n\r\n  // Always show cached data if available, but always fetch in background for freshness\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    async function load() {\r\n      // Try localStorage first\r\n      let usedCache = false;\r\n      try {\r\n        const raw = localStorage.getItem(key);\r\n        if (raw) {\r\n          const parsed = JSON.parse(raw);\r\n          setData(parsed.value);\r\n          setIsLoading(false);\r\n          usedCache = true;\r\n        }\r\n      } catch {}\r\n      // Use initialData if provided and nothing in cache\r\n      if (!usedCache && initialData !== undefined) {\r\n        setData(initialData);\r\n        setIsLoading(false);\r\n      }\r\n      // Always fetch in background\r\n      setIsLoading(true);\r\n      const fresh = await fetcher();\r\n      if (!cancelled) {\r\n        setData(fresh);\r\n        setIsLoading(false);\r\n        try {\r\n          localStorage.setItem(key, JSON.stringify({ value: fresh, ts: Date.now() }));\r\n        } catch {}\r\n      }\r\n    }\r\n    load();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n    // eslint-disable-next-line\r\n  }, [key]);\r\n\r\n  // Manual refresh\r\n  const refresh = async () => {\r\n    setIsLoading(true);\r\n    const fresh = await fetcher();\r\n    setData(fresh);\r\n    setIsLoading(false);\r\n    try {\r\n      localStorage.setItem(key, JSON.stringify({ value: fresh, ts: Date.now() }));\r\n    } catch {}\r\n  };\r\n\r\n  return { data, isLoading, refresh };\r\n}\r\n"],"names":[],"mappings":";;;AAAA;;AAQO,SAAS,oBACd,GAAW,EACX,OAAmB,EACnB,UAAsB,CAAC,CAAC;IAExB,iCAAiC;IACjC,MAAM,EAAE,WAAW,EAAE,YAAY,IAAI,KAAK,IAAI,EAAE,GAAG;IACnD,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAChD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,CAAC;IAE5C,qFAAqF;IACrF,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,YAAY;QAChB,eAAe;YACb,yBAAyB;YACzB,IAAI,YAAY;YAChB,IAAI;gBACF,MAAM,MAAM,aAAa,OAAO,CAAC;gBACjC,IAAI,KAAK;oBACP,MAAM,SAAS,KAAK,KAAK,CAAC;oBAC1B,QAAQ,OAAO,KAAK;oBACpB,aAAa;oBACb,YAAY;gBACd;YACF,EAAE,OAAM,CAAC;YACT,mDAAmD;YACnD,IAAI,CAAC,aAAa,gBAAgB,WAAW;gBAC3C,QAAQ;gBACR,aAAa;YACf;YACA,6BAA6B;YAC7B,aAAa;YACb,MAAM,QAAQ,MAAM;YACpB,IAAI,CAAC,WAAW;gBACd,QAAQ;gBACR,aAAa;gBACb,IAAI;oBACF,aAAa,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC;wBAAE,OAAO;wBAAO,IAAI,KAAK,GAAG;oBAAG;gBAC1E,EAAE,OAAM,CAAC;YACX;QACF;QACA;QACA,OAAO;YACL,YAAY;QACd;IACA,2BAA2B;IAC7B,GAAG;QAAC;KAAI;IAER,iBAAiB;IACjB,MAAM,UAAU;QACd,aAAa;QACb,MAAM,QAAQ,MAAM;QACpB,QAAQ;QACR,aAAa;QACb,IAAI;YACF,aAAa,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC;gBAAE,OAAO;gBAAO,IAAI,KAAK,GAAG;YAAG;QAC1E,EAAE,OAAM,CAAC;IACX;IAEA,OAAO;QAAE;QAAM;QAAW;IAAQ;AACpC","debugId":null}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GERALD/Desktop/NEXT/gogirlsict/lib/permissions.ts"],"sourcesContent":["// Role definitions:\r\n// super: Full control, including user create/delete\r\n// admin: Broad management, except user create/delete\r\n// moderator: Content management/moderation\r\n// beneficiary: Manage own profile, requests/messages\r\n// guest: View published content only\r\n\r\nexport const permissions = {\r\n  // --- Users ---\r\n  User: {\r\n    create: ['super'],\r\n    update: ['super', 'admin'],\r\n    delete: ['super'],\r\n    view: ['super', 'admin', 'moderator'],\r\n    updateOwn: ['beneficiary'], // only for their own profile\r\n  },\r\n\r\n  // --- Projects ---\r\n  Project: {\r\n    createDraft: ['super', 'admin', 'moderator'],\r\n    updateDraft: ['super', 'admin', 'moderator'],\r\n    publish: ['super', 'admin'],\r\n    delete: ['super', 'admin'],\r\n    view: ['super', 'admin', 'moderator', 'beneficiary', 'guest'],\r\n  },\r\n\r\n  // --- Reports ---\r\n  Report: {\r\n    createDraft: ['super', 'admin', 'moderator'],\r\n    updateDraft: ['super', 'admin', 'moderator'],\r\n    publish: ['super', 'admin'],\r\n    delete: ['super', 'admin'],\r\n    view: ['super', 'admin', 'moderator', 'beneficiary', 'guest'],\r\n  },\r\n\r\n  // --- Messages ---\r\n  Message: {\r\n    createDraft: ['super', 'admin', 'moderator', 'beneficiary'],\r\n    createForBeneficiary: ['super', 'admin', 'moderator', 'beneficiary'], // all except guest\r\n    updateDraft: ['super', 'admin', 'moderator', 'beneficiary'],\r\n    publish: ['super', 'admin', 'moderator'],\r\n    delete: ['super', 'admin'],\r\n    view: ['super', 'admin', 'moderator', 'beneficiary', 'guest'],\r\n    updateOwn: ['beneficiary'], // only their own messages\r\n  },\r\n\r\n  // --- Events ---\r\n  Event: {\r\n    createDraft: ['super', 'admin', 'moderator'],\r\n    updateDraft: ['super', 'admin', 'moderator'],\r\n    publish: ['super', 'admin'],\r\n    delete: ['super', 'admin'],\r\n    view: ['super', 'admin', 'moderator', 'beneficiary', 'guest'],\r\n  },\r\n\r\n  // --- Institutions ---\r\n  Institution: {\r\n    create: ['super', 'admin', 'moderator'],\r\n    update: ['super', 'admin'],\r\n    approve: ['super', 'admin'],\r\n    delete: ['super','admin'],\r\n    view: ['super', 'admin', 'moderator', 'beneficiary', 'guest'],\r\n  },\r\n\r\n  // --- Beneficiaries ---\r\n  Beneficiary: {\r\n    create: ['super', 'admin'],\r\n    update: ['super', 'admin', 'beneficiary'], // beneficiary can update own profile\r\n    approve: ['super', 'admin'],\r\n    delete: ['super', 'admin'],\r\n    view: ['super', 'admin', 'moderator', 'beneficiary', 'guest'],\r\n    updateOwn: ['beneficiary'], // only their own profile\r\n  },\r\n\r\n  // --- Beneficiary Requests ---\r\n  BeneficiaryRequest: {\r\n    createDraft: ['super', 'admin', 'moderator', 'beneficiary'], // all except guest\r\n    updateDraft: ['super', 'admin', 'moderator', 'beneficiary'],\r\n    publish: ['super', 'admin', 'moderator'],\r\n    delete: ['super', 'admin'],\r\n    view: ['super', 'admin', 'moderator', 'beneficiary', 'guest'],\r\n    updateOwn: ['beneficiary'], // only their own requests\r\n  },\r\n\r\n  // --- Beneficiary Messages ---\r\n  BeneficiaryMessage: {\r\n    createDraft: ['super', 'admin', 'moderator', 'beneficiary'], // all except guest\r\n    updateDraft: ['super', 'admin', 'moderator', 'beneficiary'],\r\n    publish: ['super', 'admin', 'moderator'],\r\n    delete: ['super', 'admin'],\r\n    view: ['super', 'admin', 'moderator', 'beneficiary', 'guest'],\r\n    updateOwn: ['beneficiary'], // only their own messages\r\n  },\r\n\r\n  // --- Beneficiary Request Response ---\r\n  BeneficiaryRequestResponse: {\r\n    create: ['super', 'admin', 'moderator'],\r\n    update: ['super', 'admin', 'moderator'],\r\n    delete: ['super', 'admin'],\r\n    view: ['super', 'admin', 'moderator', 'beneficiary'],\r\n  },\r\n\r\n  // --- HomePage ---\r\n  HomePage: {\r\n    update: ['super', 'admin'],\r\n    view: ['super', 'admin', 'moderator', 'beneficiary', 'guest'],\r\n  },\r\n\r\n  // --- Video / Facebook / CacheMeta ---\r\n  Video: {\r\n    view: ['super', 'admin', 'moderator', 'beneficiary', 'guest'],\r\n  },\r\n  FacebookPost: {\r\n    view: ['super', 'admin', 'moderator', 'beneficiary', 'guest'],\r\n  },\r\n  FacebookCacheMeta: {\r\n    view: ['super', 'admin', 'moderator'],\r\n  },\r\n  YouTubeCacheMeta: {\r\n    view: ['super', 'admin', 'moderator'],\r\n  },\r\n\r\n  // --- Location ---\r\n  Location: {\r\n    create: ['super', 'admin'],\r\n    update: ['super', 'admin'],\r\n    delete: ['super', 'admin'],\r\n    view: ['super', 'admin', 'moderator', 'beneficiary', 'guest'],\r\n  },\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 463, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GERALD/Desktop/NEXT/gogirlsict/app/%28admin%29/admin/dashboard/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useSession } from 'next-auth/react';\r\nimport { useRouter, useSearchParams, usePathname } from 'next/navigation';\r\nimport { useEffect, useState, useMemo, useRef } from 'react';\r\nimport dynamic from 'next/dynamic';\r\nimport { useHybridCachedData } from '@/utils/useHybridCachedData';\r\nimport * as XLSX from 'xlsx';\r\nimport DownloadColumnsModal, { ColumnOption } from './components/downloadColumnsModal';\r\nimport { handleDownloadPDF } from './components/handleDownloadPDF';\r\nimport { permissions } from '@/lib/permissions';\r\n\r\n// Icons\r\nimport {\r\n  FaUserCog,\r\n  FaCalendarAlt,\r\n  FaFilePdf,\r\n  FaUniversity,\r\n  FaUsers,\r\n  FaEnvelope,\r\n  FaClipboardList,\r\n  FaReply,\r\n  FaChartPie,\r\n  FaHome,\r\n  FaAngleLeft,\r\n  FaAngleRight,\r\n} from 'react-icons/fa';\r\n\r\n// Section components (under /components/sections/)\r\nimport ProjectsSection from './components/sections/ProjectsSection';\r\nimport ReportsSection from './components/sections/ReportsSection';\r\nimport EventsSection from './components/sections/EventsSection';\r\nimport InstitutionsSection from './components/sections/InstitutionsSection';\r\nimport BeneficiariesSection from './components/sections/BeneficiariesSection';\r\nimport BeneficiaryMessagesSection from './components/sections/BeneficiaryMessagesSection';\r\nimport BeneficiaryRequestsSection from './components/sections/BeneficiaryRequestsSection';\r\nimport BeneficiaryRequestResponseSection from './components/sections/BeneficiaryRequestResponseSection';\r\nimport ChartsSection from './components/sections/ChartsSection';\r\nimport AdminSection from './components/sections/AdminSection';\r\nimport HomePageSection from './components/sections/HomePageSection';\r\n\r\n// Rearranged sections with charts first\r\nconst sections: Section[] = [\r\n  'charts',\r\n  'projects',\r\n  'events',\r\n  'reports',\r\n  'institutions',\r\n  'beneficiaries',\r\n  'beneficiaryMessages',\r\n  'beneficiaryRequests',\r\n  'beneficiaryRequestResponse',\r\n  'Home Page',\r\n  'admin',\r\n] as const;\r\n\r\ntype Section = (typeof sections)[number];\r\n\r\n// Icons with color classes supporting dark mode via Tailwind (use text-... and dark:text-...)\r\nconst sectionIcons: Record<Section, React.ReactNode> = {\r\n  charts: <FaChartPie className=\"text-pink-600 dark:text-pink-400\" />,\r\n  projects: <FaClipboardList className=\"text-yellow-600 dark:text-yellow-400\" />,\r\n  events: <FaCalendarAlt className=\"text-green-600 dark:text-green-400\" />,\r\n  reports: <FaFilePdf className=\"text-red-600 dark:text-red-400\" />,\r\n  institutions: <FaUniversity className=\"text-blue-600 dark:text-blue-400\" />,\r\n  beneficiaries: <FaUsers className=\"text-indigo-600 dark:text-indigo-400\" />,\r\n  beneficiaryMessages: <FaEnvelope className=\"text-orange-500 dark:text-orange-400\" />,\r\n  beneficiaryRequests: <FaClipboardList className=\"text-teal-600 dark:text-teal-400\" />,\r\n  beneficiaryRequestResponse: <FaReply className=\"text-purple-600 dark:text-purple-400\" />,\r\n  'Home Page': <FaHome className=\"text-pink-700 dark:text-pink-400\" />,\r\n  admin: <FaUserCog className=\"text-gray-700 dark:text-gray-300\" />,\r\n};\r\n\r\nconst sectionLabels: Record<Section, string> = {\r\n  charts: 'Charts',\r\n  projects: 'Projects',\r\n  events: 'Events',\r\n  reports: 'Reports',\r\n  institutions: 'Institutions',\r\n  beneficiaries: 'Beneficiaries',\r\n  beneficiaryMessages: 'Beneficiary Messages',\r\n  beneficiaryRequests: 'Beneficiary Requests',\r\n  beneficiaryRequestResponse: 'Beneficiary Request Response',\r\n  'Home Page': 'Home Page',\r\n  admin: 'Admin',\r\n};\r\n\r\nconst rowsPerPageOptions = [5, 10, 25, 50];\r\n\r\nconst permKeyMap: Record<Section, keyof typeof permissions> = {\r\n  projects: 'Project',\r\n  reports: 'Report',\r\n  admin: 'User',\r\n  events: 'Event',\r\n  institutions: 'Institution',\r\n  beneficiaries: 'Beneficiary',\r\n  beneficiaryMessages: 'BeneficiaryMessage',\r\n  beneficiaryRequests: 'BeneficiaryRequest',\r\n  beneficiaryRequestResponse: 'BeneficiaryRequestResponse',\r\n  charts: 'Project',\r\n  'Home Page': 'HomePage',\r\n};\r\n\r\nfunction canView(type: keyof typeof permissions, role: string) {\r\n  return permissions[type]?.view?.includes(role);\r\n}\r\n\r\nexport default function AdminDashboardPage() {\r\n  // State and hooks...\r\n  const { data: session, status } = useSession();\r\n  const router = useRouter();\r\n  const [activeSection, setActiveSection] = useState<Section>('charts');\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [data, setData] = useState<any[]>([]);\r\n  const [editRecord, setEditRecord] = useState<any | null>(null);\r\n  const [showCreateForm, setShowCreateForm] = useState<boolean>(false);\r\n  const [showExecMsgForm, setShowExecMsgForm] = useState<boolean>(false);\r\n  const [sortBy, setSortBy] = useState('createdAt');\r\n  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('desc');\r\n  const [rowsPerPage, setRowsPerPage] = useState<number>(10);\r\n  const [page, setPage] = useState<number>(1);\r\n  const [search, setSearch] = useState('');\r\n  const sectionRef = useRef(activeSection);\r\n\r\n  const [showCreateBeneficiaryMessageForm, setShowCreateBeneficiaryMessageForm] = useState(false);\r\n  const [showCreateBeneficiaryRequestForm, setShowCreateBeneficiaryRequestForm] = useState(false);\r\n  const [selectedBeneficiaryId, setSelectedBeneficiaryId] = useState<string | null>(null);\r\n\r\n  const [showRespondForm, setShowRespondForm] = useState(false);\r\n  const [respondRequestId, setRespondRequestId] = useState<string | null>(null);\r\n\r\n  const searchParams = useSearchParams();\r\n  const pathname = usePathname();\r\n\r\n  const messagesRef = useRef<HTMLDivElement>(null);\r\n  const homepageRef = useRef<HTMLDivElement>(null);\r\n  const defaultRef = useRef<HTMLDivElement>(null);\r\n\r\n  const [downloadModalOpen, setDownloadModalOpen] = useState(false);\r\n  const [downloadColumns, setDownloadColumns] = useState<ColumnOption[]>([]);\r\n  const [pendingDownloadData, setPendingDownloadData] = useState<any[]>([]);\r\n\r\n  const [responsesCountMap, setResponsesCountMap] = useState<Record<string, number>>({});\r\n  const [messagesCountMap, setMessagesCountMap] = useState<Record<string, number>>({});\r\n  const [requestsCountMap, setRequestsCountMap] = useState<Record<string, number>>({});\r\n\r\n  const {\r\n    data: homepageData,\r\n    isLoading: loadingHomepage,\r\n    refresh: refreshHomepage,\r\n  } = useHybridCachedData('admin-dashboard-homepage-v1', async () => {\r\n    const res = await fetch('/api/homepage-content');\r\n    if (!res.ok) throw new Error('Failed to fetch homepage data');\r\n    const d = await res.json();\r\n    return d ? [d] : [];\r\n  });\r\n\r\n  const {\r\n    data: messagesData,\r\n    isLoading: loadingMessages,\r\n    refresh: refreshMessages,\r\n  } = useHybridCachedData('admin-dashboard-messages-v1', async () => {\r\n    const res = await fetch('/api/executive-messages');\r\n    if (!res.ok) throw new Error('Failed to fetch messages data');\r\n    return await res.json();\r\n  });\r\n\r\n  // ...effects for counts, permissions, etc. as before...\r\n\r\n  useEffect(() => {\r\n    const searchType = searchParams.get('type') as Section | null;\r\n    const defalultSection: Section = 'charts';\r\n    const sectionToLoad =\r\n      searchType && sections.includes(searchType) ? searchType : defalultSection;\r\n    handleMenuClick(sectionToLoad);\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  async function handleMenuClick(section: Section) {\r\n    const newUrl = `${pathname}?type=${section}`;\r\n    router.replace(newUrl);\r\n    setActiveSection(section);\r\n    setEditRecord(null);\r\n    setShowCreateForm(false);\r\n    setShowExecMsgForm(false);\r\n    setShowCreateBeneficiaryMessageForm(false);\r\n    setShowCreateBeneficiaryRequestForm(false);\r\n    setSelectedBeneficiaryId(null);\r\n    setShowRespondForm(false);\r\n    setRespondRequestId(null);\r\n    setPage(1);\r\n    sectionRef.current = section;\r\n\r\n    const feat = sectionFeatures[section];\r\n    if (section === 'Home Page') {\r\n      // nothing, handled below\r\n    } else if (feat?.apiRoute) {\r\n      try {\r\n        const res = await fetch(feat.apiRoute);\r\n        if (!res.ok) {\r\n          setData([]);\r\n          return;\r\n        }\r\n        const rawData = await res.json();\r\n        setData(filterOwn(section, rawData));\r\n      } catch {\r\n        setData([]);\r\n      }\r\n    } else {\r\n      setData([]);\r\n    }\r\n  }\r\n\r\n  // ...all other helper functions, defensive array handling, TableActions, renderSection, etc...\r\n\r\n  // Layout\r\n  return (\r\n    <div className=\"flex h-screen bg-gray-50 dark:bg-gray-900 transition-colors\">\r\n      {/* Sidebar */}\r\n      <aside\r\n        className={`transition-all duration-300 bg-white dark:bg-gray-950 border-r dark:border-gray-800 shadow-sm h-full ${\r\n          sidebarCollapsed ? 'w-16' : 'w-60'\r\n        } flex flex-col`}\r\n      >\r\n        <div className=\"flex items-center justify-between px-2 py-4 border-b dark:border-gray-800\">\r\n          <span className=\"text-xl font-bold text-pink-600 dark:text-pink-400 hidden sm:block\">\r\n            {!sidebarCollapsed && 'Dashboard'}\r\n          </span>\r\n          <button\r\n            className=\"ml-auto p-2 text-gray-700 dark:text-gray-300 hover:text-pink-600 dark:hover:text-pink-400\"\r\n            onClick={() => setSidebarCollapsed((c) => !c)}\r\n            aria-label={sidebarCollapsed ? 'Expand sidebar' : 'Collapse sidebar'}\r\n          >\r\n            {sidebarCollapsed ? <FaAngleRight size={18} /> : <FaAngleLeft size={18} />}\r\n          </button>\r\n        </div>\r\n        <nav className=\"mt-2 flex-1 overflow-y-auto\">\r\n          {sections.map((section) => (\r\n            <button\r\n              key={section}\r\n              onClick={() => handleMenuClick(section)}\r\n              className={`w-full flex items-center gap-3 px-2 py-2 rounded transition-all font-medium\r\n                ${\r\n                  activeSection === section\r\n                    ? 'bg-pink-100 dark:bg-pink-950 text-pink-600 dark:text-pink-400'\r\n                    : 'text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-900 hover:text-pink-700 dark:hover:text-pink-400'\r\n                }\r\n              `}\r\n              style={{ minWidth: 0 }}\r\n            >\r\n              <span className=\"text-lg\">{sectionIcons[section]}</span>\r\n              {!sidebarCollapsed && <span className=\"truncate\">{sectionLabels[section]}</span>}\r\n            </button>\r\n          ))}\r\n        </nav>\r\n      </aside>\r\n      {/* Main Content */}\r\n      <main className=\"flex-1 overflow-y-auto p-4 bg-white dark:bg-gray-900 transition-colors\">\r\n        {/* Top bar */}\r\n        <div className=\"flex items-center gap-2 mb-8\">\r\n          <span className=\"text-2xl\">{sectionIcons[activeSection]}</span>\r\n          <span className=\"text-xl font-bold text-gray-700 dark:text-gray-100\">\r\n            {sectionLabels[activeSection]}\r\n          </span>\r\n        </div>\r\n        {/* Section Content */}\r\n        <div>{activeSection && <div className=\"mt-2\">{renderSection()}</div>}</div>\r\n        {/* Pagination */}\r\n        {/* ...pagination code unchanged... */}\r\n        {/* Download Modal */}\r\n        {/* ...modal code unchanged... */}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}