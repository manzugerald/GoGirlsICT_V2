{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GERALD/Desktop/NEXT/gogirlsict/app/%28root%29/gallery/components/gallerySwiper.tsx"],"sourcesContent":["'use client';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Swiper, SwiperSlide } from 'swiper/react';\r\nimport { Autoplay } from 'swiper/modules';\r\nimport 'swiper/css';\r\nimport 'swiper/css/autoplay';\r\n\r\n// Import your modal slider\r\nimport ModalImageSlider from './modal-image-slider'; // see below\r\n\r\nconst fetchGalleryImages = async () => {\r\n  const [projectsRes, reportsRes, eventsRes] = await Promise.all([\r\n    fetch('/api/projects'),\r\n    fetch('/api/reports'),\r\n    fetch('/api/events'),\r\n  ]);\r\n  const [projects, reports, events] = await Promise.all([\r\n    projectsRes.json(),\r\n    reportsRes.json(),\r\n    eventsRes.json(),\r\n  ]);\r\n  const projectImages = (projects ?? []).flatMap((p: any) =>\r\n    (p.images || []).map((img: string) => ({\r\n      src: img,\r\n      alt: p.title ?? 'Project image',\r\n      key: `project-${p.id}-${img}`,\r\n    }))\r\n  );\r\n  const reportImages = (reports ?? []).flatMap((r: any) =>\r\n    (r.images || []).map((img: string) => ({\r\n      src: img,\r\n      alt: r.title ?? 'Report image',\r\n      key: `report-${r.id}-${img}`,\r\n    }))\r\n  );\r\n  const eventImages = (events ?? []).flatMap((e: any) =>\r\n    (e.eventImages || []).map((img: string) => ({\r\n      src: img,\r\n      alt: e.eventTitle ?? 'Event image',\r\n      key: `event-${e.id}-${img}`,\r\n    }))\r\n  );\r\n  return [...projectImages, ...reportImages, ...eventImages];\r\n};\r\n\r\nfunction shuffleArray<T>(array: T[]): T[] {\r\n  const arr = [...array];\r\n  for (let i = arr.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1));\r\n    [arr[i], arr[j]] = [arr[j], arr[i]];\r\n  }\r\n  return arr;\r\n}\r\n\r\nexport default function GallerySwiper() {\r\n  const [images, setImages] = useState<{ src: string; alt: string; key: string }[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [sliderImages, setSliderImages] = useState<string[]>([]);\r\n  const [sliderStart, setSliderStart] = useState(0);\r\n\r\n  useEffect(() => {\r\n    fetchGalleryImages()\r\n      .then(setImages)\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  // Grid settings\r\n  const getCols = () => {\r\n    if (typeof window === 'undefined') return 4;\r\n    if (window.innerWidth >= 1280) return 5;\r\n    if (window.innerWidth >= 1024) return 4;\r\n    if (window.innerWidth >= 768) return 3;\r\n    return 2;\r\n  };\r\n  const [cols, setCols] = useState(getCols());\r\n  useEffect(() => {\r\n    setCols(getCols());\r\n    const handleResize = () => setCols(getCols());\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  if (loading)\r\n    return (\r\n      <div className=\"w-full h-full flex items-center justify-center text-xl\">\r\n        Loading gallery...\r\n      </div>\r\n    );\r\n  if (!images.length)\r\n    return (\r\n      <div className=\"w-full h-full flex items-center justify-center text-xl\">\r\n        No images found.\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"w-full h-full grid\"\r\n        style={{\r\n          gridTemplateColumns: `repeat(${cols}, 1fr)`,\r\n          gridAutoRows: '1fr',\r\n          gap: 8,\r\n          minHeight: '80vh',\r\n          padding: 12,\r\n          boxSizing: 'border-box',\r\n        }}\r\n      >\r\n        {images.map((img, idx) => (\r\n          <div\r\n            key={img.key}\r\n            className=\"relative overflow-hidden rounded-lg shadow-md group cursor-pointer\"\r\n            style={{\r\n              background: '#222',\r\n              aspectRatio: '1/1',\r\n            }}\r\n            onClick={() => {\r\n              setSliderImages(images.map(i => i.src)); // original order\r\n              setSliderStart(idx);\r\n              setModalOpen(true);\r\n            }}\r\n          >\r\n            <img\r\n              src={img.src}\r\n              alt={img.alt}\r\n              className=\"w-full h-full object-cover object-center transition-transform duration-700 group-hover:scale-105\"\r\n              loading=\"lazy\"\r\n            />\r\n            <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent px-2 py-1 text-xs text-white\">\r\n              {img.alt}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Modal for image slider */}\r\n      {modalOpen && (\r\n        <ModalImageSlider\r\n          images={sliderImages}\r\n          initialSlide={sliderStart}\r\n          onClose={() => setModalOpen(false)}\r\n          onShuffle={() => {\r\n            // Shuffle images, but start the slider on the currently viewed image (after shuffle)\r\n            // Get the current image src\r\n            const currentSrc = sliderImages[sliderStart];\r\n            const shuffled = shuffleArray(sliderImages);\r\n            let newStart = shuffled.indexOf(currentSrc);\r\n            if (newStart === -1) newStart = 0;\r\n            setSliderImages(shuffled);\r\n            setSliderStart(newStart);\r\n          }}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}